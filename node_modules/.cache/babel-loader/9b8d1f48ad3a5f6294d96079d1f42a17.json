{"ast":null,"code":"var _jsxFileName = \"/home/john/AlfaFinal/frontend/src/components/checkout.js\";\nimport React, { Component } from 'react';\nimport '../assets/css/checkout.css';\nimport '../assets/css/alfa_style.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass CheckoutComponent extends Component {\n  constructor() {\n    super();\n    this.state = {\n      fields: {},\n      errors: {},\n      total: 0,\n      accounts2: []\n    };\n  }\n\n  handleChange(field, e) {\n    let fields = this.state.fields;\n    fields[field] = e.target.value;\n    this.setState({\n      fields\n    });\n  }\n\n  handleValidation() {\n    let fields = this.state.fields;\n    let errors = {};\n    let formIsValid = true;\n    let cardholder_filter = /^([a-zA-Z\\.\\-])+\\s([a-zA-Z\\.\\-])+$/;\n    let expireM_filter = /^[0-9]{2}$/;\n    let expireY_filter = /^[0-9]{2}$/;\n    let cardnumber_filter = /^(([0-9]){16})|(([0-9]){4}\\s([0-9]){4}\\s([0-9]){4}\\s([0-9]){4})$/;\n    let cvv_filter = /^[0-9]{3}$/;\n\n    if (typeof fields[\"card-holder\"] !== \"undefined\") {\n      if (!cardholder_filter.test(fields[\"card-holder\"])) {\n        formIsValid = false;\n        errors[\"card-holder\"] = \"Invalid name for card holder!\";\n        alert(\"Please enter a valid card holder.\");\n        this.clearCH();\n      }\n    }\n\n    if (typeof fields[\"expireM\"] !== \"undefined\") {\n      if (!expireM_filter.test(fields[\"expireM\"])) {\n        formIsValid = false;\n        errors[\"expireM\"] = \"Please enter a valid expiration date.\";\n        alert(\"Please enter a valid expiration date.\");\n        this.clearExpire();\n      }\n    }\n\n    if (typeof fields[\"expireY\"] !== \"undefined\") {\n      if (!expireY_filter.test(fields[\"expireY\"])) {\n        formIsValid = false;\n        errors[\"expireY\"] = \"Please enter a valid expiration date.\";\n        alert(\"Please enter a valid expiration date.\");\n        this.clearExpire();\n      }\n    }\n\n    if (typeof fields[\"card-number\"] !== \"undefined\") {\n      if (!cardnumber_filter.test(fields[\"card-number\"])) {\n        formIsValid = false;\n        errors[\"card-number\"] = \"Please enter a valid card number.\";\n        alert(\"Please enter a valid card number.\");\n        this.clearCN();\n      }\n    }\n\n    if (typeof fields[\"cvv\"] !== \"undefined\") {\n      if (!cvv_filter.test(fields[\"cvv\"])) {\n        formIsValid = false;\n        errors[\"cvv\"] = \"Please enter a valid cvv!\";\n        alert(\"Please enter a valid cvv.\");\n        this.clearCVV();\n      }\n    }\n\n    this.setState({\n      errors: errors\n    });\n    return formIsValid;\n  }\n\n  contactSubmit(e) {\n    e.preventDefault();\n\n    if (this.handleValidation()) {\n      window.location = \"./home.js\";\n      console.log(\"Thank you for your purchase!\");\n      alert(\"Thank you for your purchase!\");\n    }\n  }\n\n  clearCH() {\n    let fields = this.state.fields;\n    fields[\"card-holder\"] = \"\";\n    this.setState({\n      fields: fields\n    });\n  }\n\n  clearExpire() {\n    let fields = this.state.fields;\n    fields[\"expireM\"] = \"\";\n    fields[\"expireY\"] = \"\";\n    this.setState({\n      fields: fields\n    });\n  }\n\n  clearCN() {\n    let fields = this.state.fields;\n    fields[\"card-number\"] = \"\";\n    this.setState({\n      fields: fields\n    });\n  }\n\n  clearCVV() {\n    let fields = this.state.fields;\n    fields[\"cvv\"] = \"\";\n    this.setState({\n      fields: fields\n    });\n  }\n\n  componentDidMount() {\n    fetch('http://localhost:3001/checkout/').then(res => res.json()).then(data => {\n      this.setState(prevState => {\n        return {\n          accounts2: data.info\n        };\n      });\n    });\n  }\n\n  getData() {\n    fetch('http://localhost:3001/checkout/').then(res => res.json()).then(data => {\n      console.log(data);\n      this.setState(prevState => {\n        return {\n          accounts2: data\n        };\n      } // I added the .info to data.info\n      );\n    });\n  }\n\n  sum() {\n    let sums = 0;\n\n    for (var i = 0; i < this.state.accounts2.length; i++) {\n      sums += this.state.accounts2[i].price;\n    }\n\n    sums = sums * 100;\n    sums = sums / 100; // this.setState({ total: sums });\n\n    this.setState(prevState => {\n      return {\n        total: sums\n      };\n    } // I added the .info to data.info\n    ); // return total;\n  }\n\n  render() {\n    // let sum = 0;\n    // let moneys = this.sum();\n    // let moneys = this.sum.bind(this);\n    // const list = []\n    // this.state.accounts2.forEach((item) => {\n    //     sum = sum + item.price;\n    //     // list.push(item.price)\n    //     // sum =+ item.price;\n    // })\n    // var loopData = ''\n    // var i;\n    // for (i = 0; i < this.state.accounts2.length; i++) {\n    //     loopData += `<li>${this.state.accounts2[i].price}</li>`\n    // }\n    // list.forEach((itm) => {\n    //     sum = sum + itm;\n    // })\n    // for (i = 0; i < accounts2.length; i++) {\n    //     sum += sum[i].price;\n    // }\n    // this.state.accounts2.map((items) => sum = sum + items.price);\n    // {this.state.accounts2.map((items) => <li key={items.id}>\n    //  {items.price}</li>)}\n    // alert(\"moneys: \" + moneys);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main\",\n      children: /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"page payment-page\",\n        style: {\n          marginTop: \"-1em\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"payment-form dark\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"block-heading\",\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Checkout\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              action: \"./index.js\",\n              onSubmit: this.contactSubmit.bind(this),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"products\",\n                children: [this.state.accounts2.map(items => /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"price\",\n                      children: [\"$\", items.price]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 214,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"item-name\",\n                      children: items.description\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 215,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 213,\n                    columnNumber: 41\n                  }, this)\n                }, items.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 74\n                }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"total\",\n                  children: [\"Total\", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"price\",\n                    children: [\"$\", this.state.total]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 65\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-details\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"t\",\n                  children: \"Credit Card Details\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group col-sm-7\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      for: \"card-holder\",\n                      children: \"Card Holder\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 226,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      ref: \"card-holder\",\n                      name: \"card-holder\",\n                      id: \"card-holder\",\n                      type: \"text\",\n                      className: \"form-control\",\n                      placeholder: \"Card Holder\",\n                      onChange: this.handleChange.bind(this, \"card-holder\"),\n                      value: this.state.fields[\"card-holder\"],\n                      \"aria-describedby\": \"basic-addon1\",\n                      \"aria-label\": \"Card Holder\",\n                      required: \"required\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 227,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 225,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group col-sm-5\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      for: \"\",\n                      children: \"Expiration Date\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 241,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"input-group expiration-date\",\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        ref: \"expireM\",\n                        name: \"expireM\",\n                        id: \"expireM\",\n                        type: \"text\",\n                        className: \"form-control\",\n                        placeholder: \"MM\",\n                        onChange: this.handleChange.bind(this, \"expireM\"),\n                        value: this.state.fields[\"expireM\"],\n                        \"aria-describedby\": \"basic-addon1\",\n                        \"aria-label\": \"MM\",\n                        required: \"required\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 243,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"date-separator\",\n                        children: \"/\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 255,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        ref: \"expireY\",\n                        name: \"expireY\",\n                        id: \"expireY\",\n                        type: \"text\",\n                        className: \"form-control\",\n                        placeholder: \"YY\",\n                        onChange: this.handleChange.bind(this, \"expireY\"),\n                        value: this.state.fields[\"expireY\"],\n                        \"aria-describedby\": \"basic-addon1\",\n                        \"aria-label\": \"YY\",\n                        required: \"required\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 256,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 242,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 240,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group col-sm-8\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      for: \"card-number\",\n                      children: \"Card Number\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 271,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      ref: \"card-number\",\n                      name: \"card-number\",\n                      id: \"card-number\",\n                      type: \"text\",\n                      className: \"form-control\",\n                      placeholder: \"Card Number\",\n                      onChange: this.handleChange.bind(this, \"card-number\"),\n                      value: this.state.fields[\"card-number\"],\n                      \"aria-describedby\": \"basic-addon1\",\n                      \"aria-label\": \"card-number\",\n                      required: \"required\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 272,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 270,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group col-sm-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      for: \"cvv\",\n                      children: \"CVV\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 286,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      ref: \"cvv\",\n                      name: \"cvv\",\n                      id: \"cvv\",\n                      type: \"text\",\n                      className: \"form-control\",\n                      placeholder: \"CVV\",\n                      onChange: this.handleChange.bind(this, \"cvv\"),\n                      value: this.state.fields[\"cvv\"],\n                      \"aria-describedby\": \"basic-addon1\",\n                      \"aria-label\": \"cvv\",\n                      required: \"required\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 287,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 285,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group col-sm-12\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      type: \"submit\",\n                      className: \"btn btn-success btn-lg btn-block\",\n                      children: \"Submit\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 301,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 300,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }, this) //  Bootstrap template, https://tutorialzine.com/2018/02/freebie-4-beautiful-checkout-forms\n    //  I added all the regexp and changed som minor aspects of the code around. \n    ;\n  }\n\n}\n\nexport default CheckoutComponent;","map":{"version":3,"sources":["/home/john/AlfaFinal/frontend/src/components/checkout.js"],"names":["React","Component","CheckoutComponent","constructor","state","fields","errors","total","accounts2","handleChange","field","e","target","value","setState","handleValidation","formIsValid","cardholder_filter","expireM_filter","expireY_filter","cardnumber_filter","cvv_filter","test","alert","clearCH","clearExpire","clearCN","clearCVV","contactSubmit","preventDefault","window","location","console","log","componentDidMount","fetch","then","res","json","data","prevState","info","getData","sum","sums","i","length","price","render","marginTop","bind","map","items","description","id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport '../assets/css/checkout.css';\nimport '../assets/css/alfa_style.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nclass CheckoutComponent extends Component {\n    constructor() {\n        super();\n        this.state = {\n            fields: {},\n            errors: {},\n            total: 0,\n            accounts2: []\n        };\n    }\n\n    handleChange(field, e) {\n        let fields = this.state.fields;\n        fields[field] = e.target.value;\n        this.setState({ fields });\n    }\n\n    handleValidation() {\n        let fields = this.state.fields;\n        let errors = {};\n        let formIsValid = true;\n\n        let cardholder_filter = /^([a-zA-Z\\.\\-])+\\s([a-zA-Z\\.\\-])+$/;\n        let expireM_filter = /^[0-9]{2}$/;\n        let expireY_filter = /^[0-9]{2}$/;\n        let cardnumber_filter = /^(([0-9]){16})|(([0-9]){4}\\s([0-9]){4}\\s([0-9]){4}\\s([0-9]){4})$/;\n        let cvv_filter = /^[0-9]{3}$/;\n\n\n        if (typeof fields[\"card-holder\"] !== \"undefined\") {\n            if (!cardholder_filter.test(fields[\"card-holder\"])) {\n                formIsValid = false;\n                errors[\"card-holder\"] = \"Invalid name for card holder!\";\n\n                alert(\"Please enter a valid card holder.\");\n                this.clearCH();\n            }\n        }\n\n        if (typeof fields[\"expireM\"] !== \"undefined\") {\n            if (!expireM_filter.test(fields[\"expireM\"])) {\n                formIsValid = false;\n                errors[\"expireM\"] = \"Please enter a valid expiration date.\";\n\n                alert(\"Please enter a valid expiration date.\");\n                this.clearExpire();\n            }\n        }\n\n        if (typeof fields[\"expireY\"] !== \"undefined\") {\n            if (!expireY_filter.test(fields[\"expireY\"])) {\n                formIsValid = false;\n                errors[\"expireY\"] = \"Please enter a valid expiration date.\";\n\n                alert(\"Please enter a valid expiration date.\");\n                this.clearExpire();\n            }\n        }\n\n        if (typeof fields[\"card-number\"] !== \"undefined\") {\n            if (!cardnumber_filter.test(fields[\"card-number\"])) {\n                formIsValid = false;\n                errors[\"card-number\"] = \"Please enter a valid card number.\";\n\n                alert(\"Please enter a valid card number.\");\n                this.clearCN();\n            }\n        }\n\n        if (typeof fields[\"cvv\"] !== \"undefined\") {\n            if (!cvv_filter.test(fields[\"cvv\"])) {\n                formIsValid = false;\n                errors[\"cvv\"] = \"Please enter a valid cvv!\";\n\n                alert(\"Please enter a valid cvv.\");\n                this.clearCVV();\n            }\n        }\n\n        this.setState({ errors: errors });\n        return formIsValid;\n    }\n\n    contactSubmit(e) {\n        e.preventDefault();\n\n        if (this.handleValidation()) {\n            window.location = \"./home.js\";\n            console.log(\"Thank you for your purchase!\");\n            alert(\"Thank you for your purchase!\");\n        }\n    }\n\n    clearCH() {\n        let fields = this.state.fields;\n\n        fields[\"card-holder\"] = \"\";\n        this.setState({ fields: fields });\n    }\n\n    clearExpire() {\n        let fields = this.state.fields;\n\n        fields[\"expireM\"] = \"\";\n        fields[\"expireY\"] = \"\";\n\n        this.setState({ fields: fields });\n    }\n\n    clearCN() {\n        let fields = this.state.fields;\n\n        fields[\"card-number\"] = \"\";\n\n        this.setState({ fields: fields });\n    }\n\n    clearCVV() {\n        let fields = this.state.fields;\n\n        fields[\"cvv\"] = \"\";\n\n        this.setState({ fields: fields });\n    }\n\n\n    componentDidMount() {\n        fetch('http://localhost:3001/checkout/')\n            .then(res => res.json())\n            .then(data => {\n                this.setState(\n                    (prevState) => { return { accounts2: data.info } }\n                )\n            });\n    }\n\n    getData() {\n        fetch('http://localhost:3001/checkout/')\n            .then(res => res.json())\n            .then(data => {\n                console.log(data);\n                this.setState(\n                    (prevState) => { return { accounts2: data } }  // I added the .info to data.info\n                )\n            });\n    }\n\n    sum() {\n        let sums = 0;\n\n        for (var i = 0; i < this.state.accounts2.length; i++) {\n            sums += this.state.accounts2[i].price;\n        }\n\n        sums = sums * 100;\n        sums = sums / 100;\n        // this.setState({ total: sums });\n        this.setState(\n            (prevState) => { return { total: sums } }  // I added the .info to data.info\n        )\n        // return total;\n    }\n\n    render() {\n        // let sum = 0;\n        // let moneys = this.sum();\n\n        // let moneys = this.sum.bind(this);\n\n        // const list = []\n\n        // this.state.accounts2.forEach((item) => {\n        //     sum = sum + item.price;\n        //     // list.push(item.price)\n        //     // sum =+ item.price;\n        // })\n\n        // var loopData = ''\n        // var i;\n        // for (i = 0; i < this.state.accounts2.length; i++) {\n        //     loopData += `<li>${this.state.accounts2[i].price}</li>`\n        // }\n        // list.forEach((itm) => {\n        //     sum = sum + itm;\n        // })\n        // for (i = 0; i < accounts2.length; i++) {\n        //     sum += sum[i].price;\n        // }\n        // this.state.accounts2.map((items) => sum = sum + items.price);\n\n        // {this.state.accounts2.map((items) => <li key={items.id}>\n        //  {items.price}</li>)}\n\n\n        // alert(\"moneys: \" + moneys);\n\n        return (\n            <div className=\"main\" >\n                <main className=\"page payment-page\" style={{ marginTop: \"-1em\" }}>\n                    <section className=\"payment-form dark\">\n                        <div className=\"container\">\n                            <div className=\"block-heading\">\n                                <h2>Checkout</h2>\n                            </div>\n                            <form action=\"./index.js\" onSubmit={this.contactSubmit.bind(this)}>\n                                <div className=\"products\">\n                                    {this.state.accounts2.map((items) => <span key={items.id}>\n                                        <div className=\"item\">\n                                            <span className=\"price\">${items.price}</span>\n                                            <p className=\"item-name\">{items.description}</p>\n                                        </div>\n                                    </span>)}\n\n\n                                    <div className=\"total\">Total<span className=\"price\">${this.state.total}</span></div>\n                                </div>\n                                <div className=\"card-details\">\n                                    <h3 className=\"t\">Credit Card Details</h3>\n                                    <div className=\"row\">\n                                        <div className=\"form-group col-sm-7\">\n                                            <label for=\"card-holder\">Card Holder</label>\n                                            <input\n                                                ref=\"card-holder\"\n                                                name=\"card-holder\"\n                                                id=\"card-holder\"\n                                                type=\"text\"\n                                                className=\"form-control\"\n                                                placeholder=\"Card Holder\"\n                                                onChange={this.handleChange.bind(this, \"card-holder\")}\n                                                value={this.state.fields[\"card-holder\"]}\n                                                aria-describedby=\"basic-addon1\"\n                                                aria-label=\"Card Holder\"\n                                                required=\"required\" />\n                                        </div>\n                                        <div className=\"form-group col-sm-5\">\n                                            <label for=\"\">Expiration Date</label>\n                                            <div className=\"input-group expiration-date\">\n                                                <input\n                                                    ref=\"expireM\"\n                                                    name=\"expireM\"\n                                                    id=\"expireM\"\n                                                    type=\"text\"\n                                                    className=\"form-control\"\n                                                    placeholder=\"MM\"\n                                                    onChange={this.handleChange.bind(this, \"expireM\")}\n                                                    value={this.state.fields[\"expireM\"]}\n                                                    aria-describedby=\"basic-addon1\"\n                                                    aria-label=\"MM\"\n                                                    required=\"required\" />\n                                                <span className=\"date-separator\">/</span>\n                                                <input\n                                                    ref=\"expireY\"\n                                                    name=\"expireY\"\n                                                    id=\"expireY\"\n                                                    type=\"text\"\n                                                    className=\"form-control\"\n                                                    placeholder=\"YY\"\n                                                    onChange={this.handleChange.bind(this, \"expireY\")}\n                                                    value={this.state.fields[\"expireY\"]}\n                                                    aria-describedby=\"basic-addon1\"\n                                                    aria-label=\"YY\"\n                                                    required=\"required\" />\n                                            </div>\n                                        </div>\n                                        <div className=\"form-group col-sm-8\" >\n                                            <label for=\"card-number\">Card Number</label>\n                                            <input\n                                                ref=\"card-number\"\n                                                name=\"card-number\"\n                                                id=\"card-number\"\n                                                type=\"text\"\n                                                className=\"form-control\"\n                                                placeholder=\"Card Number\"\n                                                onChange={this.handleChange.bind(this, \"card-number\")}\n                                                value={this.state.fields[\"card-number\"]}\n                                                aria-describedby=\"basic-addon1\"\n                                                aria-label=\"card-number\"\n                                                required=\"required\" />\n                                        </div>\n                                        <div className=\"form-group col-sm-4\" >\n                                            <label for=\"cvv\">CVV</label>\n                                            <input\n                                                ref=\"cvv\"\n                                                name=\"cvv\"\n                                                id=\"cvv\"\n                                                type=\"text\"\n                                                className=\"form-control\"\n                                                placeholder=\"CVV\"\n                                                onChange={this.handleChange.bind(this, \"cvv\")}\n                                                value={this.state.fields[\"cvv\"]}\n                                                aria-describedby=\"basic-addon1\"\n                                                aria-label=\"cvv\"\n                                                required=\"required\" />\n                                        </div>\n                                        <div className=\"form-group col-sm-12\">\n                                            <button type=\"submit\" className=\"btn btn-success btn-lg btn-block\">Submit</button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </form>\n                        </div>\n                    </section>\n                </main>\n            </div>\n            //  Bootstrap template, https://tutorialzine.com/2018/02/freebie-4-beautiful-checkout-forms\n            //  I added all the regexp and changed som minor aspects of the code around. \n        )\n    }\n}\n\nexport default CheckoutComponent;"]},"metadata":{},"sourceType":"module"}